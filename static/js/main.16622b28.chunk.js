(this["webpackJsonpemail-box-client"]=this["webpackJsonpemail-box-client"]||[]).push([[0],{131:function(e,t,a){e.exports=a(145)},136:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=(a(136),a(9)),l=a(38),s=a(18),u=a(188),m=a(112),p=a(13),d=function(e){var t=e.component,a=Object(m.a)(e,["component"]),n=Object(p.c)((function(e){return e.user.currentUser}));return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},E=a(25),b=a(3),f=a(29),g=a(218),h=a(194),O=a(190),j=a(193),v=a(192),x=a(98),w=a.n(x),S=a(97),y=a.n(S),C=a(195),k=a(196),T=a(197),_=a(99),I=a.n(_),N=a(100),A=a.n(N),L=a(101),U=a.n(L);function R(e){return{type:"ERROR",payload:e}}var M=Object(u.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(E.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(i.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}})),D=function(){var e,t,a=M(),n=Object(f.a)(),c=Object(p.b)(),o=Object(p.c)((function(e){return e.ui.isSideBarOpen})),i=Object(s.g)(),l=function(e){c({type:"SET_CURRENT_SECTION",payload:e}),i.push("/".concat(e))};return r.a.createElement("div",{className:a.root},r.a.createElement(O.a,null),r.a.createElement(g.a,{variant:"permanent",className:Object(b.a)(a.drawer,(e={},Object(E.a)(e,a.drawerOpen,o),Object(E.a)(e,a.drawerClose,!o),e)),classes:{paper:Object(b.a)((t={},Object(E.a)(t,a.drawerOpen,o),Object(E.a)(t,a.drawerClose,!o),t))}},r.a.createElement("div",{className:a.toolbar},r.a.createElement(v.a,{onClick:function(){c({type:"TOGGLE_MENU"})}},"rtl"===n.direction?r.a.createElement(y.a,null):r.a.createElement(w.a,null))),r.a.createElement(j.a,null),r.a.createElement(h.a,null,r.a.createElement(C.a,{button:!0,key:"Inbox",onClick:function(){return l("inbox")}},r.a.createElement(k.a,null,r.a.createElement(I.a,null)),r.a.createElement(T.a,{primary:"Inbox"})),r.a.createElement(C.a,{button:!0,key:"Sent",onClick:function(){return l("sent")}},r.a.createElement(k.a,null,r.a.createElement(A.a,null)),r.a.createElement(T.a,{primary:"Sent"})),r.a.createElement(C.a,{button:!0,key:"All Mail",onClick:function(){return l("all")}},r.a.createElement(k.a,null,r.a.createElement(U.a,null)),r.a.createElement(T.a,{primary:"All Mail"}))),r.a.createElement(j.a,null)))},B=a(24),G=a(102),z=a(23),F=a(198),V=a(199),W=a(200),Q=a(105),P=a.n(Q),H=a(44),Y=a.n(H),J=a(216),$=a(202),Z=a(64),q=a(201),K=a(106),X=a.n(K),ee=a(104),te=a.n(ee);function ae(e){return{type:"SET_CURRENT_USER",payload:e}}var ne=Object(u.a)((function(e){var t;return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),color:"orange",backgroundColor:"#092c09"},title:Object(E.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},userId:Object(E.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(z.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(z.c)(e.palette.common.white,.25)},marginLeft:0},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),userIdIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(E.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),extendedIcon:{marginRight:e.spacing(1),color:"orange",backgroundColor:"#204720","&:hover":{color:"#204720",backgroundColor:"orange"}},rootError:{width:"20%","& > * + *":{marginTop:e.spacing(2),backgroundColor:"#f2c2c2",position:"absolute"}},wrapper:{width:"100%",display:"flex",justifyContent:"flex-end"},newEmailBotton:(t={whiteSpace:"nowrap","@media (max-width:600px)":{width:"-webkit-fill-available"},"@media (min-width:600px)":{fontSize:"1.5rem"}},Object(E.a)(t,e.breakpoints.up("md"),{fontSize:"1rem"}),Object(E.a)(t,"marginRight",e.spacing(1)),Object(E.a)(t,"padding",e.spacing(2)),Object(E.a)(t,"color","orange"),Object(E.a)(t,"backgroundColor","#204720"),Object(E.a)(t,"&:hover",{color:"#204720",backgroundColor:"orange"}),t)}})),re=function(){var e=ne(),t=Object(p.b)(),a=Object(s.g)(),c=Object(p.c)((function(e){return e.ui.isSideBarOpen})),o=Object(p.c)((function(e){return e.ui.allowUpdateUser})),i=Object(p.c)((function(e){return e.user.currentUser})),l=Object(n.useState)(""),u=Object(B.a)(l,2),m=u[0],d=u[1],f=Object(G.a)(m,1e3),g=Object(n.useState)(!1),h=Object(B.a)(g,2),O=h[0],j=h[1];Object(n.useEffect)((function(){d(i)}),[i]),Object(n.useEffect)((function(){try{if(0===f.length)return;new RegExp("^[\u0590-\u05ff]+$").test(f)?(j(!0),d("")):(j(!1),t(ae(f)))}catch(e){t(R("there is a problem with you User ID please try again"))}}),[f]);return r.a.createElement("div",{className:e.root},r.a.createElement(F.a,{position:"fixed",className:Object(b.a)(e.appBar,Object(E.a)({},e.appBarShift,c))},r.a.createElement(V.a,null,r.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",onClick:function(){t({type:"TOGGLE_MENU"})},edge:"start",className:Object(b.a)(e.menuButton,Object(E.a)({},e.hide,c))},r.a.createElement(te.a,null)),r.a.createElement(Z.a,{variant:"h6",noWrap:!0,className:e.title},"Email App"),i&&r.a.createElement(W.a,{variant:"extended",className:e.newEmailBotton,onClick:function(){return a.push("/compose")}},r.a.createElement(P.a,null),"New Email"),o&&r.a.createElement("div",{className:e.userId},r.a.createElement("div",{className:e.userIdIcon},r.a.createElement(X.a,null)),r.a.createElement(q.a,{error:!0,placeholder:"User ID here",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"userId"},onChange:function(e){return d(e.target.value)},value:m||""}))),r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.rootError},r.a.createElement($.a,{in:O},r.a.createElement(J.a,{severity:"error",action:r.a.createElement(v.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){j(!1)}},r.a.createElement(Y.a,{fontSize:"inherit"}))},"ID must be : a-z, A-Z, 1-9"))))))},ce=a(215),oe=a(76),ie=a(214),le=a(107),se=a.n(le);function ue(e,t){return{type:"GET_EMAILS_REQUESTED",payload:{skip:e,limit:t}}}var me=Object(u.a)((function(e){return{root:{display:"flex",paddingTop:0,paddingBottom:0,"@media (max-width:600px)":{flexDirection:"column"}},texts:{width:"350px","@media (max-min:600px)":{},"@media (max-width:600px)":{width:"100px",padding:0,margin:0}},icon:{marginTop:"17px"},fonts:{"@media (max-width:600px)":{fontSize:"1rem"},"@media (min-width:600px)":{fontSize:"1.2rem"}}}})),pe=function(e){var t=e.email,a=Object(s.g)(),n=me(),c=Object(p.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{alignItems:"flex-start",button:!0,onClick:function(){a.push("/email/".concat(t.id)),c(function(e){return{type:"SET_SELECTED_EMAIL",payload:e}}(t))},className:n.root},[t.from,t.subject,t.content,t.createdAt].map((function(e,t){return r.a.createElement(T.a,{key:e+Math.random(),className:n.texts,primary:r.a.createElement(ie.a,{component:"div",my:2,textOverflow:"ellipsis",overflow:"hidden",className:n.fonts},3!==t?e:oe(e).format("MMM-D"))})})),r.a.createElement(k.a,{className:n.icon},r.a.createElement(se.a,{onClick:function(e){return function(e,t){try{t.stopPropagation(),c(function(e){return{type:"DELETE_EMAIL_REQUESTED",payload:e}}(e))}catch(t){}}(t.id,e)}}))),r.a.createElement(j.a,null))},de=a(207),Ee=a(203),be=a(204),fe=a(205),ge=a(206),he=Object(u.a)((function(e){return{title:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(4)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},content:{margin:0,padding:e.spacing(2)},action:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(1)}}}));function Oe(){var e=r.a.useState(!0),t=Object(B.a)(e,2),a=t[0],n=t[1],c=Object(s.g)(),o=Object(p.b)(),i=he(),l=Object(p.c)((function(e){return e.ui.error})),u=function(){n(!1),o({type:"CLEAN_ERROR"}),o(ae(null)),c.push("/login")};return r.a.createElement("div",null,r.a.createElement(Ee.a,{onClose:u,"aria-labelledby":"customized-dialog-title",open:a},r.a.createElement(be.a,{disableTypography:!0,className:i.title},r.a.createElement(Z.a,{variant:"h6"},"Something went wrong"),r.a.createElement(v.a,{"aria-label":"Close",className:i.closeButton,onClick:u},r.a.createElement(Y.a,null))),r.a.createElement(fe.a,{className:i.content},r.a.createElement(Z.a,{gutterBottom:!0},l)),r.a.createElement(ge.a,{className:i.action},r.a.createElement(de.a,{onClick:u,color:"primary"},"To Login Page"))))}var je=a(208),ve=Object(u.a)((function(e){return{centered:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}));function xe(){var e=ve();return r.a.createElement("div",{className:e.centered},r.a.createElement(je.a,null))}var we=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,height:"86vh","& > *":{marginTop:e.spacing(2)}},centered:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},empty:{backgroundColor:e.palette.background.paper,textAlign:"center",height:"100%",position:"fixed",top:"50%",left:"50%",transform:" translate(-50%, 0)",color:"#092c09",fontSize:"1.2rem","@media (max-width:600px)":{padding:0,fontSize:"1.2rem"},"@media (min-width:600px)":{fontSize:"1.5rem"}},pagination:{"& > *":{marginTop:e.spacing(2)},position:"fixed",bottom:25,display:"flex",justifyContent:"center",width:"-webkit-fill-available"}}})),Se=function(){var e=Object(p.b)(),t=we(),a=Object(p.c)((function(e){return e.emails.emails})),c=Object(p.c)((function(e){return e.ui.loading})),o=Object(p.c)((function(e){return e.ui.error})),i=Object(p.c)((function(e){return e.user.currentUser})),l=Object(n.useState)(1),s=Object(B.a)(l,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){e({type:"TOGGLE_UPDATE_USER",payload:!0}),e(ue());var t=setInterval((function(){e(ue())}),4e4);return function(){return clearInterval(t)}}),[]),Object(n.useEffect)((function(){m(1),e(ue())}),[i]),Object(n.useEffect)((function(){e({type:"SET_SKIP",payload:11*(u-1)})}),[u]),r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.centered},c&&!o&&r.a.createElement(xe,null)),r.a.createElement(h.a,{component:"nav","aria-label":"main mailbox folders"},!c&&!o&&Array.isArray(a)&&a.length>0&&a.map((function(e){return r.a.createElement(pe,{email:e,key:e.id})})),o&&r.a.createElement(Oe,{message:"There is problem at this moment please try later"})),!o&&!c&&Array.isArray(a)&&0===a.length&&r.a.createElement("div",{className:t.empty},"There is no emails to show"),r.a.createElement("div",{className:t.pagination},r.a.createElement(ce.a,{count:3,variant:"outlined",shape:"rounded",onChange:function(e,t){return m(t)},page:u})))},ye=function(){return r.a.createElement(Se,null)},Ce=function(){return r.a.createElement(Se,null)},ke=function(){return r.a.createElement(Se,null)},Te=a(213),_e=a(109),Ie=a.n(_e),Ne=a(148),Ae=Object(u.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",width:"100%"},textField:{marginLeft:e.spacing(1),marginTop:e.spacing(2),width:"100%"},header:{color:"orange",backgroundColor:"#092c09",textAlign:"center",width:"100%",padding:e.spacing(2),borderRadius:"2%",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},icon:{"&:hover":{backgroundColor:"orange",borderRadius:"50%",color:"#092c09"}},reachText:{height:200},content:{margin:0,width:"100%",border:"white"},container:{width:"100%",border:"white"}}})),Le=function(){var e=Ae(),t=Object(s.g)(),a=Object(p.b)(),c=Object(p.c)((function(e){return e.user.currentUser})),o=Object(n.useState)(""),i=Object(B.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)(c),d=Object(B.a)(m,2),E=d[0],b=d[1],f=Object(n.useState)(""),g=Object(B.a)(f,2),h=g[0],O=g[1],j=Object(n.useState)(""),v=Object(B.a)(j,2),x=v[0],w=v[1],S=Object(n.useState)(""),y=Object(B.a)(S,2),C=y[0],k=y[1],T=Object(n.useState)(""),_=Object(B.a)(T,2),I=_[0],N=_[1],A=Object(n.useState)(!1),L=Object(B.a)(A,2),U=L[0],R=L[1],M=Object(n.useState)(!1),D=Object(B.a)(M,2),G=D[0],z=D[1],F=function(){var e=function(){var e=0===l.length;return R(e),N(e?"please insert Sender ID here":""),!e}(),t=function(){var e=0===E.length;return z(e),k(e?"please insert Receiver ID here":""),!e}();return e&&t};return Object(n.useEffect)((function(){b(c)}),[c]),r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.header},r.a.createElement(Y.a,{className:e.icon,onClick:function(){return t.goBack()}}),r.a.createElement("span",null,"New Email"),r.a.createElement(Ie.a,{className:e.icon,onClick:function(){try{if(!F())return;a({type:"SAVE_EMAIL_REQUESTED",payload:{from:E,to:l,subject:h,content:x}}),w(""),O(""),u(""),b(""),w(""),t.goBack()}catch(e){a({type:"SAVE_EMAIL_FAILED",payload:e.message})}}})),r.a.createElement("div",{className:e.container},r.a.createElement(Te.a,{error:G,helperText:C,className:e.textField,id:"a",label:"from",fullWidth:!0,value:E,onChange:function(e){return t=e.target.value,void b(t);var t},disabled:!0}),r.a.createElement(Te.a,{error:U,className:e.textField,id:"s",helperText:I,label:"to",fullWidth:!0,value:l,onChange:function(e){return t=e.target.value,void u(t);var t}}),r.a.createElement(Te.a,{className:e.textField,id:"sf",label:"subject",fullWidth:!0,value:h,onChange:function(e){return O(e.target.value)}}),r.a.createElement(Ne.a,{"aria-label":"minimum height",value:x,rowsMin:35,className:e.content,onChange:function(e){return w(e.target.value)}})))},Ue=a(217),Re=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.ui.success})),a=function(){e({type:"CLOSE_SUCCESS"})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{open:!!t,autoHideDuration:6e3,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(J.a,{onClose:a,severity:"success",elevation:6,variant:"filled"},t)))},Me=a(16),De=a.n(Me),Be=a(45),Ge=a(219),ze=a(110),Fe=a.n(ze),Ve=a(210),We=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),color:"orange",backgroundColor:"#092c09","&:hover":{color:"orange",backgroundColor:"#092c09"}}}}));function Qe(){var e=Object(p.b)(),t=Object(s.g)(),a=We(),c=Object(n.useState)(""),o=Object(B.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)(!1),m=Object(B.a)(u,2),d=m[0],E=m[1],b=Object(n.useState)(""),f=Object(B.a)(b,2),g=f[0],h=f[1],j=function(){var e=new RegExp("^[\u0590-\u05ff]+$").test(i);return E(e),h(e?"ID must be : a-z, A-Z, 1-9":""),e},v=function(){var a=Object(Be.a)(De.a.mark((function a(n){return De.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n.preventDefault(),0!==i.length&&!j()){a.next=7;break}return l(""),a.abrupt("return");case 7:e(ae(i)),t.push("/inbox");case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),e(R("there is a problem please try again"));case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(Ve.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(Ge.a,{className:a.avatar},r.a.createElement(Fe.a,null)),r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:v},r.a.createElement(Te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userId",label:"User Id",name:"email",autoComplete:"userId",autoFocus:!0,value:i,onChange:function(e){return l(e.target.value)},error:d,helperText:g}),r.a.createElement(de.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Show My Emails"))))}var Pe=a(211),He=a(212),Ye=Object(u.a)({root:{minHeight:"95vh"},pos:{marginBottom:12,margin:5},info:{display:"flex",justifyContent:"space-between",margin:2,padding:"10px","@media (max-width:600px)":{flexDirection:"column"}},content:{margin:20,display:"flex",padding:"10px"},icon:{backgroundColor:"#092c09",color:"orange",borderRadius:"50%",margin:15,"&:hover":{backgroundColor:"orange",color:"#092c09"}}});function Je(){var e=Object(s.g)(),t=Ye(),a=Object(s.h)().id,n=Object(p.c)((function(e){return e.emails.emails})),c=n.findIndex((function(e){return e.id===a})),o=n[c];return r.a.createElement(Pe.a,{className:t.root,variant:"outlined"},r.a.createElement(Y.a,{className:t.icon,onClick:function(){return e.goBack()}}),r.a.createElement(He.a,null,r.a.createElement(Z.a,{variant:"h5",component:"h2",className:t.pos},o.subject),r.a.createElement(j.a,null),r.a.createElement("div",{className:t.info},r.a.createElement(Z.a,{className:t.pos,color:"textSecondary"},o.from),r.a.createElement(Z.a,{className:t.pos,color:"textSecondary"},oe(o.createdAt).format("D-MM-YYYY  HH:mm"))),r.a.createElement(j.a,null),r.a.createElement("div",{className:t.content},r.a.createElement(Z.a,{variant:"body2",component:"p"},o.content))))}var $e=Object(u.a)((function(e){return{root:{display:"flex",height:"100%"},toolbar:Object(i.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3),"@media (max-width:600px)":{padding:0}}}}));var Ze=function(){var e=$e();return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(s.d,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.root},r.a.createElement(re,null),r.a.createElement(D,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(d,{component:ye})),r.a.createElement(s.b,{path:"/inbox"},r.a.createElement(d,{component:ye})),r.a.createElement(s.b,{path:"/sent"},r.a.createElement(d,{component:Ce})),r.a.createElement(s.b,{path:"/all"},r.a.createElement(d,{component:ke})),r.a.createElement(s.b,{path:"/login"},r.a.createElement(Qe,null)),r.a.createElement(s.b,{path:"/compose"},r.a.createElement(d,{component:Le})),r.a.createElement(s.b,{path:"/email/:id"},r.a.createElement(d,{component:Je}))))))),r.a.createElement(Re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=a(39),Ke=a(111),Xe=a(19),et="https://email-app-api.herokuapp.com",tt=De.a.mark(ot),at=De.a.mark(it),nt=function(e){return{user:e.user.currentUser,section:e.ui.currentSection,skip:e.emails.skip}};function rt(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(Be.a)(De.a.mark((function e(t){var a,n,r,c,o,i,l;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,n=t.section,r=t.skip,e.prev=1,c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=5,fetch("".concat(et,"/emails/").concat(n,"?skip=").concat(r),c);case 5:return o=e.sent,e.next=8,o.json();case 8:if(i=e.sent,o.ok){e.next=14;break}if(-1===[401,403].indexOf(o.status)){e.next=12;break}throw new Error("cannot get emails");case 12:throw l=i&&i.message||o.statusText,new Error(l);case 14:return e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(1),Object(Xe.c)({type:"ERROR",payload:e.t0.message}),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function ot(){var e,t;return De.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Xe.d)(nt);case 3:return e=a.sent,a.next=6,Object(Xe.b)(rt,e);case 6:return t=a.sent,a.next=9,Object(Xe.c)({type:"GET_EMAILS_SUCCESS",payload:t});case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(Xe.c)({type:"GET_EMAILS_FAILED",payload:a.t0.message});case 15:case"end":return a.stop()}}),tt,null,[[0,11]])}function it(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.f)("GET_EMAILS_REQUESTED",ot);case 2:case"end":return e.stop()}}),at)}var lt=it,st=De.a.mark(Et),ut=De.a.mark(bt),mt=function(e){return{user:e.user.currentUser}};function pt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(Be.a)(De.a.mark((function e(t){var a,n,r,c,o,i;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,n=t.id,e.prev=1,r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=5,fetch("".concat(et,"/email/").concat(n),r);case 5:return c=e.sent,e.next=8,c.json();case 8:if(o=e.sent,c.ok){e.next=14;break}if(-1===[401,403].indexOf(c.status)){e.next=12;break}throw new Error("cannot delete email");case 12:throw i=o&&o.message||c.statusText,new Error(i);case 14:return e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),new Error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function Et(e){var t,a,n;return De.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Xe.d)(mt);case 4:return a=r.sent,r.next=7,Object(Xe.b)(pt,Object(i.a)(Object(i.a)({},a),{},{id:t}));case 7:return n=r.sent,"email deleted successfully",r.next=11,Object(Xe.c)({type:"DELETE_EMAIL_SUCCESS",payload:{id:n.id,message:"email deleted successfully"}});case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(1),r.next=17,Object(Xe.c)({type:"SAVE_EMAIL_FAILED",payload:r.t0.message});case 17:case"end":return r.stop()}}),st,null,[[1,13]])}function bt(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.e)("DELETE_EMAIL_REQUESTED",Et);case 2:case"end":return e.stop()}}),ut)}var ft=bt,gt=De.a.mark(xt),ht=De.a.mark(wt),Ot=function(e){return{user:e.user.currentUser}};function jt(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(Be.a)(De.a.mark((function e(t){var a,n,r,c,o,i;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,n=t.email,e.prev=1,r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(n)},e.next=5,fetch("".concat(et,"/email"),r);case 5:return c=e.sent,e.next=8,c.json();case 8:if(o=e.sent,c.ok){e.next=14;break}if(-1===[401,403].indexOf(c.status)){e.next=12;break}throw new Error("cannot save email");case 12:throw i=o&&o.message||c.statusText,new Error(i);case 14:return e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),new Error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function xt(e){var t,a,n;return De.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Xe.d)(Ot);case 4:return a=r.sent,r.next=7,Object(Xe.b)(jt,Object(i.a)(Object(i.a)({},a),{},{email:t}));case 7:return n=r.sent,"Email saves successfully",r.next=11,Object(Xe.c)({type:"SAVE_EMAIL_SUCCESS",payload:{email:n,message:"Email saves successfully"}});case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(1),r.next=17,Object(Xe.c)({type:"SAVE_EMAIL_FAILED",payload:r.t0.message});case 17:case"end":return r.stop()}}),gt,null,[[1,13]])}function wt(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.e)("SAVE_EMAIL_REQUESTED",xt);case 2:case"end":return e.stop()}}),ht)}var St=wt,yt=De.a.mark(Ct);function Ct(){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.a)([lt(),ft(),St()]);case 2:case"end":return e.stop()}}),yt)}var kt=a(84),Tt=function(e,t){var a=e.findIndex((function(e){return e.id===t}));return-1!==a&&e.splice(a,1),e},_t={emails:[],selectedEmail:null,skip:0};var It={isSideBarOpen:!1,currentSection:"inbox",loading:!1,error:null,success:null,allowUpdateUser:!1};var Nt={currentUser:""};var At=Object(qe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(i.a)(Object(i.a)({},e),{},{currentUser:t.payload});default:return e}},emails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EMAILS_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{emails:t.payload});case"SET_SELECTED_EMAIL":return Object(i.a)(Object(i.a)({},e),{},{selectedEmail:t.payload});case"DELETE_EMAIL_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{emails:Object(kt.a)(Tt(e.emails,t.payload.id))});case"SAVE_EMAIL_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{emails:[].concat(Object(kt.a)(e.emails),[t.payload.email])});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MENU":return Object(i.a)(Object(i.a)({},e),{},{isSideBarOpen:!e.isSideBarOpen});case"TOGGLE_UPDATE_USER":return Object(i.a)(Object(i.a)({},e),{},{allowUpdateUser:t.payload});case"SET_CURRENT_SECTION":return Object(i.a)(Object(i.a)({},e),{},{currentSection:t.payload});case"GET_CURRENT_SECTION":return{currentSection:e.ui.currentSection};case"SAVE_EMAIL_REQUESTED":case"GET_EMAILS_REQUESTED":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"SAVE_EMAIL_SUCCESS":case"DELETE_EMAIL_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,success:t.payload.message});case"GET_EMAILS_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case"DELETE_EMAIL_FAILED":case"SAVE_EMAIL_FAILED":case"GET_EMAILS_FAILED":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.payload});case"ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:t.payload});case"CLEAN_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:null});case"SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{success:t.payload});case"CLOSE_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{success:null});default:return e}}}),Lt=Object(Ke.a)(),Ut=Object(qe.d)(Object(qe.a)(Lt),"object"===typeof window&&"undefined"!==typeof window.devToolsExtension?window.devToolsExtension():function(e){return e})(qe.e)(At);Lt.run(Ct);var Rt=Ut;o.a.render(r.a.createElement(p.a,{store:Rt},r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ze,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.16622b28.chunk.js.map